<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/index.html" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>





.article__link  {
      color: #747E88;
      font-size: 18px;
      -webkit-transition: all 0.3s ease-out 0s;
      -moz-transition: all 0.3s ease-out 0s;
      -ms-transition: all 0.3s ease-out 0s;
      -o-transition: all 0.3s ease-out 0s;
      transition: all 0.3s ease-out 0s; }
      .footer-link .link li a:hover {
        color: #0898E7; }

    .signup-container {
      display: flex;
      flex-direction: column;
      margin-inline: auto;
      min-height: 100vh;
      max-width: 1140px;
      padding: 40px;
      width: 100%;
    }

    .signup {
      background-color: white;
    }

    /* Student-research-space - Signup header */
    .signup-header {
      align-items: center;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .signup-header__link {
      align-items: center;
      display: flex;
      margin-bottom: 10px;
    }

    .back-arrow-icon {
      background-color: #fff;
      border: 1px solid lightgray;
      border-radius: 6px;
      display: inline-block;
      margin-right: 10px;
      padding: 8px 12px;
    }

    h1,
    h2 {
      color: #333;
      text-align: center;
    }

    #cardsContainer {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .card {
      border: 1px solid #ddd;
      padding: 10px;
      margin: 10px;
      width: 200px;
      text-align: center;
      position: relative;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s ease-in-out;
    }

    .card:hover {
      transform: scale(1.05);
    }

    .card img {
      width: 100%;
      height: 150px;
      /* Fixed height for cover photo */
      object-fit: cover;
      border-radius: 5px 5px 0 0;
      /* Rounded corners only at the top */
    }

    .card .button-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .card .view-btn {
      display: inline-block;
      background-color: #1b1d1c;
      color: #fff;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 5px;
      font-size: 14px;
      transition: background-color 0.3s ease-in-out;
      margin-top: 5px;
      /* Adjusted margin */
    }

    .card .view-btn:hover {
      background-color: #6b6b68;
    }

    .card h3 {
      color: #333;
      font-size: 1.2em;
      margin: 10px 0;
    }

    .card p {
      color: #666;
      font-size: 0.9em;
      margin: 0 10px;
      /* Adjusted margin */
      height: 60px;
      /* Fixed height for description */
      overflow: hidden;
    }

    .delete-btn,
    .download-btn {
      position: absolute;
      bottom: 10px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-size: 20px;
    }

    .delete-btn {
      right: 10px;
      color: #e74c3c;
    }

    .delete-btn:hover {
      color: #c0392b;
    }

    .download-btn {
      left: 10px;
      color: #2ecc71;
    }

    .download-btn:hover {
      color: #27ae60;
    }

    .form {
      background-color: #fff;
      box-shadow: 0 10px 60px rgba(218, 229, 255, 0.8);
      border: 1px solid rgb(159, 159, 160);
      border-radius: 20px;
      padding: 1rem;
      text-align: center;
      font-size: 0.875rem;
      max-width: 320px;
      margin: 0 auto;
    }

    .drop-container {
      background-color: #fff;
      display: flex;
      gap: 10px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 10px;
      margin-top: 1rem;
      border-radius: 10px;
      border: 2px dashed rgb(11, 59, 155);
      color: #020202;
      cursor: pointer;
      transition: background .2s ease-in-out, border .2s ease-in-out;
    }

    .drop-container:hover {
      background: rgba(22, 22, 22, 0.164);
      border-color: rgba(17, 17, 17, 0.616);
    }

    .drop-title {
      color: #444;
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      transition: color .2s ease-in-out;
    }

    #websiteInput,
    #folder-input,
    #coverInput {
      width: 100%;
      color: #444;
      padding: 2px;
      background: #fff;
      border-radius: 10px;
      border: 1px solid rgba(8, 8, 8, 0.288);
    }

    #folder-input::file-selector-button,
    #coverInput::file-selector-button {
      margin-right: 10px;
      border: none;
      background: #0898E7;
      padding: 5px 10px;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      transition: background .2s ease-in-out;
    }

    #folder-input::file-selector-button:hover,
    #coverInput::file-selector-button:hover {
      background: rgba(8, 152, 231, 0.7);
    }

    .upload-form {
      background: #ffffff;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      max-width: 280px;
      width: 100%;
      margin: 10px auto;
    }

    .upload-form input[type="text"],
    .upload-form textarea,
    .upload-form input[type="file"],
    .upload-form button,
    .upload-form input[type="url"] {
      width: calc(100% - 20px);
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      box-sizing: border-box;
    }

    .upload-form input[type="text"]:focus,
    .upload-form textarea:focus,
    .upload-form input[type="file"]:focus,
    .upload-form button:focus,
    .upload-form input[type="url"]:focus {
      outline: none;
      border-color: #3d3f41;
    }

    .upload-form textarea {
      height: 80px;
      resize: vertical;
    }

    .upload-form button {
      background-color: #0056b3;
      color: #ffffff;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .upload-form button:hover {
      background-color: #0056b3;
    }

    /* CARDS */

    /* Site main */
    .site-main {
      flex: 1;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .article {
      margin-top: 80px;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s ease-in-out;
      width: 300px;
      /* Adjust as needed */
    }

    .article:hover {
      transform: scale(1.05);
    }

    .article__graphic {
      width: 100%;
    }

    .article__graphic img {
      width: 100%;
      height: 200px;
      /* Adjust as needed */
      object-fit: cover;
    }

    .article__preview {
      padding: 20px;
    }

    .article__title {
      color: #000;
      font-size: 1.5rem;
    }

    .article__copy {
      margin-top: 20px;
      color: #666;
      font-size: 0.9em;
    }

    .article__profile {
      align-items: center;
      display: flex;
      margin-top: 20px;
    }

    .article__profile-avatar {
      flex-basis: 64px;
      margin-right: 20px;
    }

    .article__profile-avatar img {
      width: 100%;
      border-radius: 50%;
    }

    .article__profile-info {
      color: #333;
    }

    .main-article__profile-name {
      font-weight: 700;
    }

    .button-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .delete-btn,
    .download-btn {
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-size: 20px;
    }

    .delete-btn {
      color: #e74c3c;
    }

    .delete-btn:hover {
      color: #c0392b;
    }

    .download-btn {
      color: #2ecc71;
    }

    .download-btn:hover {
      color: #27ae60;
    }

    @media (max-width: 768px) {
      .signup-header {
        flex-direction: column;
        align-items: center;
      }

      .signup-header__link {
        margin-bottom: 15px;
      }

      .upload-form {
        max-width: 100%;
      }
    }

    @media (max-width: 576px) {
      .form {
        max-width: 90%;
        padding: 10px;
      }

      .drop-container {
        padding: 5px;
        margin-top: 0.5rem;
      }

      .upload-form input[type="text"],
      .upload-form textarea,
      .upload-form input[type="file"],
      .upload-form button,
      .upload-form input[type="url"] {
        width: calc(100% - 10px);
        padding: 6px;
        margin-bottom: 8px;
      }
    }
  </style>
</head>

<body>



  <body class="signup">
  <div class="signup-container">
    <header class="signup-header">
      <a href="signup.html" class="signup-header__link">
        <img src="assets\images\stslogo.png" alt="Site logo" class="Site-logo" width="250px"
          height="50px">
      </a>
      <a href="index.html" class="signup-header__link">
        <img src="back-arrow.svg" alt="" class="back-arrow-icon">
        <span class="back-home-text font-bold">Back to homepage</span>
      </a>
    </header>
<div>
    <h3 id="createprojects">Upload Your Project:</h3>
  </div>
    <form class="form">
      <label for="folder-input" class="drop-container">
        <span class="drop-title">Drop folders here</span>
        or
        <input type="file" webkitdirectory multiple id="folder-input">
      </label>
      <div class="upload-form">
        <input type="text" id="titleInput" placeholder="Title"><br>
        <textarea id="descriptionInput" placeholder="Description"></textarea><br>
        <span class="drop-title">Choose cover photo</span>
        <input type="file" accept="image/*" required id="coverInput"><br>
        <input type="url" id="websiteInput" placeholder="Website URL"><br>
        <button type="button" onclick="uploadFolder()">Upload</button>
      </div>
    </form>
  </div>
</div> <!-- container -->
<h2>Projects</h2>
<main class="site-main">
<div class="row" id="cardsContainer">
<!-- Cards will be appended here -->
</div>
</main>
<div class="footer-shape shape-1"></div>
<div class="footer-shape shape-2"></div>
<div class="footer-shape shape-3"></div>
<div class="footer-shape shape-4"></div>
<div class="footer-shape shape-5"></div>
<div class="footer-shape shape-6"></div>
<div class="footer-shape shape-7"></div>
<div class="footer-shape shape-8">
    <img class="svg" src="assets/images/footer-shape.svg" alt="Shape">
</div>

  <script>
   
// Load folders from localStorage on page load
window.onload = function () {
  loadFolders();
};

function uploadFolder() {
  const folderInput = document.getElementById('folder-input');
  const titleInput = document.getElementById('titleInput');
  const descriptionInput = document.getElementById('descriptionInput');
  const coverInput = document.getElementById('coverInput');
  const websiteInput = document.getElementById('websiteInput');

  const files = Array.from(folderInput.files);
  const cover = coverInput.files[0];

  if (files.length > 0 && cover && websiteInput.value.trim() !== '') {
    const reader = new FileReader();
    reader.onload = function (e) {
      const folderData = {
        id: Date.now(), // Unique ID for each folder
        title: titleInput.value,
        description: descriptionInput.value,
        cover: e.target.result,
        website: websiteInput.value.trim(),
        files: []
      };

      // Read the contents of each file
      let fileCount = files.length;
      files.forEach((file, index) => {
        const fileReader = new FileReader();
        fileReader.onload = function (event) {
          folderData.files.push({
            name: file.name,
            type: file.type,
            size: file.size,
            lastModified: file.lastModified,
            content: event.target.result // Store file content
          });

          fileCount--;
          if (fileCount === 0) {
            // All files have been read
            saveFolderData(folderData);
            addCard(folderData);
            // Clear the inputs
            folderInput.value = '';
            titleInput.value = '';
            descriptionInput.value = '';
            coverInput.value = '';
            websiteInput.value = '';
          }
        };
        fileReader.readAsDataURL(file);
      });
    };
    reader.readAsDataURL(cover);
  } else {
    alert('Please select a folder, a cover image, and provide a valid Website URL');
  }
}

function saveFolderData(folderData) {
  let folders = JSON.parse(localStorage.getItem('folders')) || [];
  folders.push(folderData);
  localStorage.setItem('folders', JSON.stringify(folders));
}

function loadFolders() {
  const folders = JSON.parse(localStorage.getItem('folders')) || [];
  folders.forEach(folderData => addCard(folderData));
}
function addCard(folderData) {
  const cardsContainer = document.getElementById('cardsContainer');
  const card = document.createElement('article');
  card.className = 'article';
  card.id = folderData.id;
  card.innerHTML = `
    <div class="article__graphic">
      <a href="${folderData.website}" class="article__link" target="_blank">
        <img src="${folderData.cover}" alt="${folderData.title}">
      </a>
    </div>
    <div class="article__preview">
      <a href="${folderData.website}" class="article__link article__link--decoration" target="_blank">
        <h1 class="article__title">${folderData.title}</h1>
      </a>
      <p class="article__copy">${folderData.description}</p>
      <div class="article__profile">
        <div class="article__profile-avatar">
          <img src="assets/images/avatar.jpg" alt="User avatar">
        </div>
        <div class="article__profile-info">
          <p class="main-article__profile-name">John doe</p>
          <p>Web developer</p>
        </div>
      </div>
      <div class="button-container">
        <button class="delete-btn" onclick="deleteCard(${folderData.id})">
          <i class="fas fa-trash-alt"></i>
        </button>
        <button class="download-btn" onclick="downloadFolder(${folderData.id})">
          <i class="fas fa-download"></i>
        </button>
      </div>
    </div>
  `;
  cardsContainer.appendChild(card);
}


function deleteCard(id) {
  // Remove card from the DOM
  const card = document.getElementById(id);
  card.parentNode.removeChild(card);

  // Remove card data from localStorage
  let folders = JSON.parse(localStorage.getItem('folders')) || [];
  folders = folders.filter(folder => folder.id !== id);
  localStorage.setItem('folders', JSON.stringify(folders));
}

function downloadFolder(id) {
  const folders = JSON.parse(localStorage.getItem('folders')) || [];
  const folder = folders.find(folder => folder.id === id);
  if (folder) {
    const zip = new JSZip();
    folder.files.forEach(file => {
      zip.file(file.name, file.content.split(',')[1], { base64: true });
    });
    zip.generateAsync({ type: 'blob' }).then(function (content) {
      saveAs(content, `${folder.title}.zip`);
    });
  }
}

  </script>

    
 
</body>

</html>
